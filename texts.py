# ========1.1 文字常量文件開始 ========#
# 本文件包含所有固定文字內容，包括隱私條款和算法說明

# ========1.1.1 隱私條款開始 ========#
PRIVACY_TERMS = """
📜 **八字配對 Bot 隱私條款**

在使用本服務前，請仔細閱讀以下條款：

**1. 數據收集**
- 收集您的出生年月日時（用於八字計算）
- 收集您的性別（用於八字配對）
- 收集您的 Telegram 用戶名（用於配對成功後聯絡）

**2. 數據使用**
- 八字資料僅用於配對計算
- 用戶名僅在雙方同意配對後交換
- 不會將您的資料用於商業用途
- 不會分享您的個人資料給第三方

**3. 數據儲存**
- 八字資料加密儲存在數據庫
- 可隨時清除您的個人資料
- 數據庫定期清理無效資料

**4. 配對規則**
- 每日最多10次配對機會
- 60分以上方可交換聯絡方式
- 雙方同意後才會交換用戶名
- 可隨時停止使用服務

**5. 免責聲明**
- 八字配對結果僅供參考
- 實際感情發展需雙方經營
- 不保證配對成功或婚姻美滿
- 請理性看待配對結果

**6. 用戶權利**
- 有權要求刪除個人資料
- 有權拒絕任何配對
- 有權舉報不當行為
- 有權停止使用服務

請確認您已閱讀並同意以上條款。
"""
# ========1.1.1 隱私條款結束 ========#

# ========1.1.2 算法說明開始 ========#
EXPLANATION_TEXT = f"""
📚 師傅級八字婚配系統詳解

本 Bot 採用師傅級婚配系統，已整合所有改進：

1. 🔬 **核心評分模組（總分100分）**
   • 能量救應匹配：35分上限（極弱救應、需求對接）
   • 結構核心配合：28分上限（天干五合、地支六合、六沖六害）
   • 人格風險評估：25分上限（傷官見官、羊刃坐財、財星遇劫等）
   • 刑沖壓力分析：20分上限（六沖六害檢測與化解）
   • 神煞加持系統：12分上限（紅鸞、天喜、天乙貴人等）
   • 專業化解分析：15分上限（殺印相生、傷官生財等）

2. ⚙️ **多層次計算架構**
   **第一層：時間處理**
   • 真太陽時校正（經度差、均時差、夏令時）
   • 日界規則（子正換日、子初換日、無調整）
   • 時間信心度映射（高/中/低/估算）

   **第二層：八字核心**
   • 司令進氣動態（餘氣/中氣/本氣，7-5-18天分配）
   • 身強弱量化計算（月令35% + 通根25% + 生扶15% + 調候 + 空亡）
   • 格局判斷（從格陰陽差異、專旺格、正格）
   • 喜用神動態計算（特殊格局優先、身強弱判斷、五行特性補充）

   **第三層：配對分析**
   • 雙向影響分析（用戶A對用戶B、用戶B對用戶A）
   • 關係模型分類（平衡型、供求型、相欠型、混合型）
   • 現實校準機制（年齡差距、硬傷上限、無硬傷保底）

3. 🎯 **評分閾值系統**
   • 93分以上：🌟 萬中無一（極品組合，互相成就）
   • 85-92分：✨ 上等婚配（明顯互補，幸福率高）
   • 75-84分：✅ 主流成功（現實高成功率，可經營）
   • 68-74分：🤝 普通可行（有缺點但可努力經營）
   • 60-67分：⚠️ 需要努力（問題較多，需謹慎考慮）
   • 55-59分：🔴 不建議（沖剋嚴重，難長久）
   • 54分以下：❌ 強烈不建議（硬傷明顯，易生變）

4. 🔄 **救應優先原則**
   • 能量救應可抵銷30%人格風險和刑沖壓力扣分
   • 極弱救應（<10%五行得到>30%補充）：+12分
   • 需求對接（喜用神匹配）：+6分
   • 救應抵銷機制：確保積極因素優先考慮

5. 🛡️ **保護機制**
   • 總扣分上限：-50分（防止過度懲罰）
   • 人格風險上限：-25分
   • 刑沖壓力上限：-20分
   • 現實保底分：68分（無硬傷情況下）
   • 致命風險上限：45分（日支六沖等硬傷）

6. 🌐 **雙向關係模型**
   • 平衡型：雙向差異<10分，平等和諧
   • 供求型：單向差異≥15分，明確的供需關係
   • 相欠型：差異≥20分且平均<60分，不平衡關係
   • 混合型：複雜多變的互動模式

7. ⏰ **時間信心度系統**
   • 高信心度（0.95）：精確到分鐘
   • 中信心度（0.90）：精確到小時
   • 低信心度（0.85）：模糊描述
   • 估算時間（0.80）：系統估算
   • 僅在有實際時間調整時應用置信度折扣

8. 🎭 **格局特點**
   • 五陽從氣不從勢：陽干（甲丙戊庚壬）難從格
   • 五陰從勢無情義：陰干（乙丁己辛癸）易從格
   • 專旺格：同類五行>80%，喜同類
   • 從格：日主極弱，喜順從最旺五行

9. ✨ **神煞系統**
   • 吉神：紅鸞(+3)、天喜(+2)、天乙貴人(+4)、天德(+2)、月德(+1)
   • 凶煞：羊刃(-3)、劫煞(-2)、亡神(-2)、孤辰(-2)、寡宿(-2)
   • 組合加成：紅鸞+天喜組合額外+3分
   • 上限控制：神煞總加分不超過12分

10. 🔧 **專業化解**
    • 殺印相生：七殺+正印，+6分
    • 傷官生財：傷官+正財，+5分
    • 財官相生：偏財+正官，+4分
    • 食傷配印：食傷+正印，+3分
    • 化解上限：不超過15分

💡 **系統特色**：
• 審計日誌：所有計算步驟可追溯
• 大運流年：未來5年風險檢測，一票否決機制
• 月令氣勢：動態司令進氣計算
• 藏干系統：地支深層能量分析
• 五行分佈：精確到0.1%的百分比計算

💖 八字是參考工具，真正感情需要用心經營！
"""
# ========1.1.2 算法說明結束 ========#

# ========1.2 對話文字常量開始 ========#
# 詢問出生時間的文字
ASK_HOUR_KNOWN_TEXT = """
請問您是否知道確切的出生時間？

✅ 知道確切時間 - 知道幾點幾分出生
🤔 大約知道 - 知道大概時段（如早上、下午、晚上）
❓ 完全不知道 - 完全不知道出生時間

準確的時間能提高八字計算準確度！
"""

# 大約知道時間的描述提示
APPROXIMATE_HOUR_DESCRIPTION = """
請描述您大約的出生時段（例如：早上、下午、晚上、深夜等）：

範例：
• 早上太陽剛出來時
• 下午3點左右
• 晚上吃晚飯時間
• 深夜12點後
"""

# 時辰未知的提示
UNKNOWN_HOUR_WARNING = """
⚠️ **時辰未知提示**

由於您不知道出生時間，系統將使用中午12點（午時）作為預設時間計算。

🔍 **影響說明：**
1. 時柱計算可能不準確
2. 夫妻宮分析可能偏差
3. 五行分佈計算受影響
4. 配對信心度會降低

💡 **建議：**
• 向家人查詢準確出生時間
• 查看出生證明文件
• 配對結果僅供參考

請選擇性別：
"""

# 幫助命令文字
HELP_TEXT = """
📚 師傅級八字配對 Bot 使用說明

主要指令：
/start - 註冊或重新註冊（需同意隱私條款）
/profile - 查看八字資料
/match - 開始八字配對
/find_soulmate - 搜尋最佳出生時空
/explain - 詳細解釋算法
/testpair <年1> <月1> <日1> <時1> <性別1> <年2> <月2> <日2> <時2> <性別2> - 測試任意兩個八字配對
/help - 顯示此說明
/admin_test - 管理員測試命令（僅限管理員）
/admin_stats - 管理員統計命令（僅限管理員）

🔮 算法特點：
• 師傅級邏輯：先判格局，再論合沖
• 能量救應：極弱救應+12分，需求對接+6分
• 結構核心：天干五合+6分，地支六合+5分，六沖-12分
• 人格風險：傷官見官、羊刃坐財等風險檢測
• 刑沖壓力：六沖六害檢測與化解
• 神煞加持：紅鸞、天喜、天乙貴人等吉凶神煞
• 專業化解：殺印相生、傷官生財等化解組合
• 雙向分析：用戶A對用戶B、用戶B對用戶A分別評分
• 關係模型：平衡型、供求型、相欠型、混合型分類

📊 評分系統：
• 起始基準分：72分
• 現實保底分：68分（無硬傷）
• 聯絡交換門檻：68分
• 良好婚配：75分
• 上等婚配：85分
• 極品婚配：93分

🕰️ 時間處理：
• 真太陽時校正（經度、均時差、夏令時）
• 時間信心度映射（高/中/低/估算）
• 日界規則（子正23:00換日、子初00:00換日）
• 僅在有實際時間調整時應用信心度折扣

🎭 格局判斷：
• 司令進氣動態（餘氣7天、中氣5天、本氣18天）
• 陰陽干支差異（五陽從氣不從勢，五陰從勢無情義）
• 身強弱量化計算（月令35%、通根25%、生扶15%）
• 喜用神動態計算（特殊格局優先）

💡 重要提示：
• 請確保出生時間準確
• 未知時辰會降低計算準確度
• 結果僅供參考，實際相處更重要
• 尊重彼此，保持禮貌
• 管理員功能僅限授權用戶使用
"""

# AI使用提示
AI_USAGE_TIPS = """
💡 使用提示：
• 按下一鍵複製
• 到AI工具如ChatGPT/Gemini/Grok/DeepSeek貼上內容並發送
• AI會詳細分析你的八字配對

✨ 建議問AI時要求用粵語回答，更貼地！
"""

# 註冊完成提示
REGISTRATION_COMPLETE_TEXT = """
✅ 註冊完成！資料已儲存。{confidence_text}

{profile_result}

祝你找到好姻緣！💕
"""
# ========1.2 對話文字常量結束 ========#

# ========文件信息開始 ========#
"""
文件: texts.py
功能: 文字常量文件，包含所有固定文字內容

引用文件: 無
被引用文件: bot.py (主程序)
"""
# ========文件信息結束 ========#

# ========目錄開始 ========#
"""
1.1.1 隱私條款 - PRIVACY_TERMS 常量
1.1.2 算法說明 - EXPLANATION_TEXT 常量
1.2 對話文字常量 - 所有對話和提示文字
"""
# ========目錄結束 ========#

# ========修正紀錄開始 ========#
"""
版本 1.0 (2024-01-31)
創建文件：從 bot.py 拆分 PRIVACY_TERMS 和 EXPLANATION_TEXT 文字常量

版本 1.1 (2024-01-31)
修改內容：
1. 添加對話文字常量（ASK_HOUR_KNOWN_TEXT、APPROXIMATE_HOUR_DESCRIPTION、UNKNOWN_HOUR_WARNING）
2. 添加幫助文字（HELP_TEXT）
3. 添加AI使用提示（AI_USAGE_TIPS）
4. 添加註冊完成提示（REGISTRATION_COMPLETE_TEXT）

版本 1.2 (2024-02-01)
修改內容：
1. 簡化 REGISTRATION_COMPLETE_TEXT：
   - 刪除重複的操作指令提示
   - 只保留基本註冊完成信息
   - 讓 bazi_calculator.py 的 format_profile_result() 顯示完整操作指南
2. 更新目錄和修正紀錄

版本 1.3 (2024-02-01) - 本次修正
主要修改：
1. 完全重寫 EXPLANATION_TEXT，根據 new_calculator.py 內容更新：
   - 更新評分模組：能量救應、結構核心、人格風險、刑沖壓力、神煞加持、專業化解
   - 添加多層次計算架構：時間處理、八字核心、配對分析
   - 更新評分閾值系統：93/85/75/68/60/55/54分對應評級
   - 添加救應優先原則：能量救應可抵銷30%負面分數
   - 添加保護機制：總扣分上限、人格風險上限、刑沖壓力上限
   - 添加雙向關係模型：平衡型、供求型、相欠型、混合型
   - 添加時間信心度系統：高/中/低/估算四個等級
   - 更新格局特點：五陽從氣不從勢、五陰從勢無情義
   - 更新神煞系統：吉神凶煞列表及分數
   - 添加專業化解組合：殺印相生、傷官生財等

2. 更新 HELP_TEXT：
   - 添加管理員命令說明
   - 更新算法特點描述
   - 添加評分系統說明
   - 添加時間處理說明
   - 添加格局判斷說明

3. 保持原有其他文字常量不變

影響：
- 算法說明現在完全反映 new_calculator.py 的實際計算邏輯
- 幫助文本更詳細和準確
- 用戶能更好地理解系統的運算原理
- 管理員命令得到適當說明

注意：本次更新確保所有說明文字與實際系統功能完全一致
"""
# ========修正紀錄結束 ========#