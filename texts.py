# ========1.1 隱私條款和介紹文本開始 ========#
PRIVACY_TERMS = """
📜 **隱私條款**

歡迎使用八字配對系統！在使用本服務前，請仔細閱讀以下隱私條款：

**1. 資料收集**
- 我們會收集您的出生年月日時、性別、目標對象性別等基本資料
- 您的Telegram用戶名和ID會用於配對通知
- 所有八字計算在本地進行，不傳輸敏感資料

**2. 資料使用**
- 八字資料僅用於配對計算
- 配對成功時會交換雙方用戶名以便聯絡
- 不會將您的資料用於商業用途或分享給第三方

**3. 資料儲存**
- 資料加密儲存在安全的PostgreSQL數據庫
- 您可以隨時使用 /clear 命令刪除所有資料
- 系統會定期清理無效數據

**4. 免責聲明**
- 八字配對僅供參考，不保證100%準確
- 情感關係需要雙方共同努力經營
- 請理性看待配對結果

**5. 同意條款**
使用本服務即表示您同意上述條款。
"""

EXPLANATION_TEXT = """
📚 **八字配對系統算法說明**

本系統採用專業八字命理學為基礎，結合現代算法優化：

**核心算法架構：**
1. **時間處理層** - 真太陽時校正、DST處理、日界規則
2. **八字計算層** - 四柱計算、五行分析、格局判斷
3. **評分引擎層** - 多模組專業評分
4. **結果校準層** - 現實因素調整、置信度應用

**評分模組（總分100分）：**
• **能量救應**（25分） - 喜用神互補、五行濃度
• **結構核心**（20分） - 天合地合、日柱關係
• **刑沖壓力**（-30分） - 六沖六害、日支硬傷
• **人格風險**（-25分） - 十神衝突、格局問題
• **神煞加持**（12分） - 紅鸞天喜、天乙貴人
• **專業化解**（10分） - 殺印相生、財官相生
• **大運風險**（-15分） - 年齡差距、未來同步

**關係模型判定：**
• **平衡型** - 雙方影響力接近，平等和諧
• **供求型** - 一方明顯影響另一方，互補關係
• **混合型** - 複雜互動，需要更多磨合

**專業特性：**
✓ 支持真太陽時校正（經度、DST、EOT）
✓ 時間信心度調整機制
✓ 刑沖硬傷上限保護
✓ 現實保底分機制

**使用建議：**
1. 盡量提供準確出生時間
2. 理性看待配對分數（60分以上為及格）
3. 分數僅供參考，實際關係需要經營
4. 可重複配對尋找更合適對象

如有疑問，請使用 /help 查看幫助。
"""

HELP_TEXT = """
🆘 **幫助指南**

**基本命令：**
/start - 開始使用（需要同意隱私條款）
/profile - 查看個人八字分析
/match - 開始配對（每日限10次）
/testpair - 測試任意兩個八字配對
/find_soulmate - 搜尋最佳出生時空
/explain - 查看算法詳細說明
/clear - 清除所有個人資料
/help - 顯示此幫助信息

**使用流程：**
1. 輸入 /start 開始註冊
2. 提供出生年月日時和性別
3. 確認時間精度（影響計算準確度）
4. 使用 /match 開始配對
5. 查看配對結果並決定是否認識

**注意事項：**
• 請確保Telegram已設定用戶名，否則無法配對
• 配對分數60分以上為及格，建議尋找70分以上對象
• 每日配對次數有限制（10次）
• 可隨時使用 /clear 刪除資料重新開始

**八字格式示例：**
男 1990 01 31 12 30 女
（性別 年 月 日 時 分 對象性別）

**測試命令示例：**
/testpair 1990 1 1 12 男 1991 2 2 13 女

如有問題，請聯繫管理員。
"""

AI_USAGE_TIPS = """
💡 **使用提示**

**八字配對只是參考工具：**
• 分數反映八字組合的理論匹配度
• 實際關係需要雙方共同經營
• 70分以上為良好匹配，60-70分為可以嘗試

**提高配對成功率：**
1. **準確時間** - 提供精確出生時間（最好到分鐘）
2. **明確目標** - 清楚自己想要什麼樣的關係
3. **開放心態** - 不要過度依賴分數高低
4. **主動交流** - 配對成功後要主動認識對方

**理解配對結果：**
✅ **優勢部分** - 你們的八字中互相補足的地方
⚠️ **挑戰部分** - 需要注意和努力改善的方面
🤝 **關係模型** - 你們的互動模式建議

**時間信心度影響：**
• 高信心度 - 時間準確，計算結果可靠
• 中信心度 - 時間估算，結果有一定參考價值
• 低信心度 - 時間不確定，建議僅供參考

**建議使用流程：**
1. 先用 /testpair 測試幾個已知八字
2. 了解算法後再用 /match 正式配對
3. 分數不理想時可調整搜索條件
4. 保持耐心，好緣分值得等待

記住：八字配對是工具，幸福關係靠經營！
"""

AI_ANALYSIS_PROMPTS = """以下問題可以幫助你更深入分析這段關係：
1. 雙方個性特質如何互相影響？
2. 在哪些生活領域最容易產生衝突？
3. 雙方價值觀和人生目標是否一致？
4. 遇到困難時，雙方會如何互相支持？
5. 長期相處需要特別注意哪些方面？
6. 雙方溝通方式有何差異？
7. 在金錢和物質方面的態度如何？
8. 對家庭和子女教育的看法是否一致？
9. 在社交和朋友圈方面是否和諧？
10. 雙方成長背景對關係有何影響？"""

REGISTRATION_COMPLETE_TEXT = """
✅ **註冊完成！**

您的八字資料已成功儲存：

**基本資料：**
• 性別：{gender}
• 出生：{year}年{month}月{day}日{hour}時
• 對象性別：{target_gender}

**八字信息：**
• 四柱：{year_pillar} {month_pillar} {day_pillar} {hour_pillar}
• 生肖：{zodiac}，日主：{day_stem}（{day_stem_strength}）
• 格局：{pattern_type}
• 喜用神：{useful_elements}
• 五行分佈：木{wood}% 火{fire}% 土{earth}% 金{metal}% 水{water}%

**信心度：** {confidence_text}

**下一步：**
• 使用 /match 開始配對
• 使用 /profile 查看詳細分析
• 使用 /explain 了解算法原理

祝您找到好姻緣！💕
"""

HEALTH_QUOTES = [
    "健康是最大的財富，規律作息保平安。",
    "心平氣和，身體自然安康。",
    "飲食有節，起居有常，健康常在。",
    "適量運動，保持活力，遠離疾病。",
    "心理健康與身體健康同等重要。",
    "早睡早起，精神百倍，疾病遠離。",
    "笑口常開，心情愉快，健康自然來。",
    "定期檢查，預防勝於治療。",
    "均衡飲食，適量運動，充足睡眠。",
    "保持正面心態，健康與你同在。"
]
# ========1.1 隱私條款和介紹文本結束 ========#

# ========1.2 註冊流程文本開始 ========#
BASIC_INFO_FORMAT_TEXT = """
📝 **請輸入您的個人資料**

**格式：**
性別 年 月 日 時 分 對象性別 [經度]

**說明：**
• 性別：男 或 女
• 年：四位數年份（1900-今年）
• 月：1-12
• 日：1-31
• 時：0-23（24小時制）
• 分：0-59（可省略，默認0）
• 對象性別：男/女/異性/同性
• 經度：可選，默認香港經度114.17

**例子：**
1. 男 1990 3 01 6 0 女
2. 女 1995 06 10 12 15 男 121.47
3. 男 2000 09 20 18 30 異性
4. 女 2005 12 31 23 45 同性 120.58

請現在輸入您的資料：
"""

CONFIRM_TIME_TEXT = """
✅ **資料確認**

請確認以下資料是否正確：

**您的資料：**
• 性別：{gender}
• 出生：{year}年{month}月{day}日{hour}時{minute}分
• 對象性別：{target_gender}
• 經度：{longitude}

**時間精度確認：**
請選擇您對出生時間的確定程度：
"""

ASK_HOUR_KNOWN_TEXT = """
⏰ **出生時間確認**

您是否知道確切的出生時辰？

這會影響八字計算的準確性。
"""

APPROXIMATE_HOUR_DESCRIPTION = """
🕐 **大約時辰描述**

請描述您大約的出生時段，例如：
• "早上天亮時"
• "中午吃飯時間"  
• "下午三四點"
• "晚上八九點"
• "半夜凌晨"

我們會根據描述估算時辰。
"""

UNKNOWN_HOUR_WARNING = """
⚠️ **時辰未知注意**

由於時辰未知，系統將使用預設時間（中午12:00）計算。

**影響：**
• 時柱可能不準確
• 八字評分會受影響
• 建議盡量回憶或詢問家人

您確定要繼續使用預設時間嗎？
"""
# ========1.2 註冊流程文本結束 ========#

# ========1.3 功能選單文本開始 ========#
FUNCTION_MENU_TEXT = """
🎯 **功能選單**

**核心功能：**
/match - 開始配對（尋找{target_gender}對象）
/profile - 查看個人八字分析
/testpair - 測試任意兩個八字配對
/find_soulmate - 搜尋最佳出生時空

**輔助功能：**
/explain - 查看算法詳細說明
/clear - 清除所有個人資料
/help - 顯示幫助信息

**使用建議：**
• 確保時間準確以提高配對精度
• 70分以上為良好匹配
• 分數僅供參考，實際關係需要經營
• 保持耐心，好緣分值得等待
"""

ADMIN_MENU_TEXT = """

**管理員功能：**
/maintenance - 開關維護模式
/admintest - 運行完整測試案例
/stats - 查看系統統計
/quicktest - 系統健康檢查
/listtests - 列出測試案例
"""
# ========1.3 功能選單文本結束 ========#

# ========1.4 配對流程文本開始 ========#
NO_MATCHES_TEXT = """
暫時未有合適的配對對象。\n
建議：\n
1. 稍後再試 /match\n
2. 使用 /find_soulmate 搜尋最佳配對\n
3. 檢查你的目標性別設定是否合適
"""

NO_QUALIFIED_MATCHES_TEXT = """
暫時未有分數合格的配對對象。\n
建議：\n
1. 稍後再試，系統會更新用戶數據\n
2. 調整你的出生時間信息提高準確度\n
3. 使用 /find_soulmate 搜尋理論最佳配對
"""

MATCH_INVITATION_TEXT = "是否想認識對方？"

MATCH_SUCCESS_TEXT_TEMPLATE = """🎉 {rating} 配對成功！

📊 配對分數：{score:.1f}分
✨ 雙方已同意交換聯絡方式

👤 你的配對對象：@{username}

💬 可以開始聊天了！"""

MATCH_SUCCESS_NO_USERNAME_TEXT = """
⚠️ 注意：對方未設定 Telegram 用戶名，請先請對方設定用戶名。
"""

MATCH_WAITING_TEXT = "✅ 已記錄你的意願，等待對方回應..."

MATCH_REJECTED_TEXT = "已略過此配對。下次再試 /match 吧！"

MATCH_EXPIRED_TEXT = "配對已過期（10分鐘），請重新開始。"

MATCH_INVALID_TEXT = "配對數據已過期或無效。"

SCORE_TOO_LOW_TEXT = """此配對分數 {score:.1f}分 未達交換聯絡方式標準（需≥{threshold}分）。\n
建議尋找更合適的配對。"""
# ========1.4 配對流程文本結束 ========#

# ========1.5 Find Soulmate 文本開始 ========#
FIND_SOULMATE_WELCOME_TEXT = """
🔮 歡迎使用「真命天子搜尋器」！
這個功能會幫你在指定過去年份範圍內，找出最匹配的出生時空（年月日時）。\n
請先輸入搜尋年份範圍（例如1990-1999，建議每次不超過10年，避免運算太長）：
"""

FIND_SOULMATE_INVALID_RANGE_TEXT = "請使用正確格式，例如：1990-1999"

FIND_SOULMATE_YEAR_RANGE_ERROR_TEXT = "請輸入合理年份範圍（1900-{current_year}）"

FIND_SOULMATE_RANGE_TOO_LARGE_TEXT = "年份範圍太大，建議每次不超過20年"

FIND_SOULMATE_START_END_ERROR_TEXT = "開始年份必須小於結束年份"

FIND_SOULMATE_TOO_MANY_DATES_TEXT = "範圍太大（約{date_count}個日期），請縮小範圍"

FIND_SOULMATE_CONFIRM_RANGE_TEXT = """
✅ 確認搜尋範圍：{start_year}-{end_year}年（約{date_count}個時空會被篩選）。\n
請選擇搜尋目的（影響權重調整）：\n
💖 尋找正緣（重視靈魂契合、日柱配合同配偶星）\n
🤝 事業合夥（重視喜用互補、格局穩定同大運加持）
"""

FIND_SOULMATE_PURPOSE_PROMPT_TEXT = "請選擇上方選項"

FIND_SOULMATE_CALCULATING_TEXT = """
⚡ 開始掃描{start_year}-{end_year}年內所有出生時空...\n
⏳ 正在進行八字配對計算...\n
🔍 搜索範圍：約{date_count}個日期
"""

FIND_SOULMATE_NO_RESULTS_TEXT = """
❌ 在{start_year}-{end_year}年內未找到合適的匹配時空。\n
建議：\n
1. 嘗試不同的年份範圍\n
2. 調整搜尋目的\n
3. 擴大搜尋範圍
"""

FIND_SOULMATE_SEARCH_ERROR_TEXT = """
❌ 搜尋失敗: {error}\n
請稍後再試或縮小搜尋範圍。\n
建議每次搜尋不超過10年範圍。
"""

FIND_SOULMATE_CANCELLED_TEXT = "已取消真命天子搜尋。"

FIND_SOULMATE_COMPLETE_TEXT = "✅ 搜尋完成！找到 {count} 個匹配時空。"

FIND_SOULMATE_RESULT_TEMPLATE = """🔮 真命天子搜尋結果
========================================

📅 搜尋範圍：{start_year}年 - {end_year}年
🎯 搜尋目的：{purpose_text}
🏆 最高分數：{best_score:.1f}分
📊 找到匹配：{match_count}個高質量時空

🥇 最佳匹配：
• 分數：{best_score:.1f}分
• 日期：{best_date}
• 時辰：{best_hour}
• 八字：{best_pillars}

📋 詳細匹配列表（前{show_count}名）
========================================

{matches_list}

💡 使用建議
========================================

1. **理論最佳**：以上結果為理論上最匹配的出生時空
2. **確認時辰**：時辰為整點，實際使用時需結合出生地經度校正
3. **綜合考慮**：分數僅供參考，需結合實際情況
4. **深入分析**：可複製具體八字使用 /testpair 命令深入分析
5. **時間信心度**：搜尋結果為理論最佳，實際應用時需考慮時間精度
"""
# ========1.5 Find Soulmate 文本結束 ========#

# ========1.6 錯誤提示文本開始 ========#
DATABASE_ERROR_TEXT = "系統錯誤：數據庫連接失敗，請稍後再試。"

USER_NOT_FOUND_TEXT = "未找到註冊記錄，請先使用 /start 註冊。"

PROFILE_INCOMPLETE_TEXT = "尚未完成個人資料輸入，請使用 /start 完成註冊流程。"

GENDER_MISSING_TEXT = "性別資料缺失，請使用 /start 重新輸入。"

BAZI_DATA_MISSING_TEXT = "八字數據未生成，請使用 /start 重新計算。"

DAILY_LIMIT_EXCEEDED_TEXT = """
⚠️ 今日已達配對次數上限（{limit}次）。\n
請明天再試。\n
今天已使用 {count} 次配對機會。
"""

TELEGRAM_USERNAME_MISSING_TEXT = """
⚠️ 你未設定 Telegram 用戶名！\n
請先到 Telegram 設定中設定用戶名，否則配對成功後對方無法聯絡你。\n
設定完成後請重新輸入 /start。
"""

MAINTENANCE_MODE_TEXT = """
🔧 **系統維護中**\n\n
八字配對系統正在進行升級維護，請稍後再試。\n\n
**維護期間：**\n
• 普通用戶無法使用任何功能\n
• 管理員可正常使用管理功能\n
• 預計恢復時間請關注公告\n\n
如需協助，請聯繫管理員。
"""

ADMIN_ONLY_TEXT = """
❌ **權限不足**\n\n
此功能僅限管理員使用。\n
如需管理員權限，請聯繫系統管理員。
"""

CLEAR_CONFIRM_TEXT = """
⚠️ **確認清除所有資料**\n\n
此操作將會：\n
• 刪除你的八字資料\n
• 刪除所有配對紀錄\n
• 刪除你的用戶資料\n\n
⚠️ 此操作無法還原！\n\n
確定要清除所有資料嗎？\n
請輸入： /clear confirm\n
或輸入其他命令取消。
"""

CLEAR_SUCCESS_TEXT = """
✅ 已清除你的所有資料。\n
如需重新使用服務，請輸入 /start 重新註冊。
"""

CLEAR_FAILED_TEXT = "❌ 清除資料失敗，請稍後再試或聯繫管理員。"

TESTPAIR_FORMAT_TEXT = """
請提供兩個完整的八字參數。\n
格式：/testpair <年1> <月1> <日1> <時1> <性別1> <年2> <月2> <日2> <時2> <性別2>\n\n
例如：/testpair 1990 1 1 12 男 1991 2 2 13 女\n
性別：男 或 女\n\n
可選參數：<分鐘1> <分鐘2> <經度1> <經度2>\n
例如：/testpair 1990 1 1 12 男 1991 2 2 13 女 30 30 114.17 121.47
"""

TESTPAIR_INVALID_GENDER_TEXT = "性別必須是「男」或「女」"

TESTPAIR_INVALID_DATE_TEXT = "日期無效，請檢查年月日是否正確"

TESTPAIR_INVALID_HOUR_TEXT = "時間必須在 0-23 之間"

TESTPAIR_INVALID_MINUTE_TEXT = "分鐘必須在 0-59 之間"

TESTPAIR_INVALID_LONGITUDE_TEXT = "經度必須在 -180 到 180 之間"

TESTPAIR_BAZI_CALC_FAILED_TEXT = "八字計算失敗，請檢查輸入參數"

TESTPAIR_INDEPENDENT_NOTE_TEXT = """
💡 注意：這只是獨立測試，不會保存到配對數據庫中。\n
如需正式配對，請使用 /match 命令。
"""
# ========1.6 錯誤提示文本結束 ========#

# ========1.7 管理員文本開始 ========#
MAINTENANCE_ON_TEXT = """
🔧 **維護模式已開啟**\n\n
**系統狀態：**\n
• 普通用戶無法使用任何功能\n
• 管理員可正常使用管理功能\n
• 新用戶無法註冊\n
• 現有配對功能暫停\n\n
請在完成維護後輸入 /maintenance off 恢復正常運作。
"""

MAINTENANCE_OFF_TEXT = """
✅ **維護模式已關閉**\n\n
**系統狀態：**\n
• 所有功能恢復正常\n
• 用戶可以正常註冊和使用\n
• 配對功能恢復運作\n\n
系統已恢復正常運作。
"""

MAINTENANCE_STATUS_TEMPLATE = """
🛠️ **當前維護模式：{status}**\n\n
**使用方法：**\n
/maintenance on - 開啟維護模式\n
/maintenance off - 關閉維護模式\n\n
**影響：**\n
• 開啟時普通用戶無法使用系統\n
• 管理員功能不受影響\n
• 維護期間可進行系統升級和測試
"""

ADMIN_TEST_START_TEXT = "🔄 開始運行管理員測試..."

ADMIN_TEST_IMPORT_ERROR_TEXT = "❌ 導入管理員服務失敗: {error}"

ADMIN_TEST_FAILED_TEXT = "❌ 測試失敗: {error}"

STATS_FETCHING_TEXT = "📊 獲取系統統計..."

STATS_IMPORT_ERROR_TEXT = "❌ 導入管理員服務失敗: {error}"

STATS_FAILED_TEXT = "❌ 統計失敗: {error}"

QUICK_TEST_START_TEXT = "⚡ 開始系統健康檢查..."

QUICK_TEST_METHOD_MISSING_TEXT = "❌ 快速測試功能尚未實現: {error}"

QUICK_TEST_FAILED_TEXT = "❌ 快速測試失敗: {error}"

LIST_TESTS_IMPORT_ERROR_TEXT = "❌ 導入測試案例失敗: {error}"

LIST_TESTS_FAILED_TEXT = "❌ 列出測試失敗: {error}"
# ========1.7 管理員文本結束 ========#

# 🔖 文件信息
# 引用文件：無
# 被引用文件：bot.py, new_calculator.py, bazi_soulmate.py, admin_service.py

# 🔖 Section目錄
# 1.1 隱私條款和介紹文本
# 1.2 註冊流程文本
# 1.3 功能選單文本
# 1.4 配對流程文本
# 1.5 Find Soulmate 文本
# 1.6 錯誤提示文本
# 1.7 管理員文本

# 🔖 修正紀錄
# 2026-02-10: 新增 AI_ANALYSIS_PROMPTS 常量，用於提供AI分析提示
# 2026-02-10: 保持所有其他文本不變，只新增缺失的常量